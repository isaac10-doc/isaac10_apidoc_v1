<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;http&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="http">REST</a>
              <a href="#" data-language-name="javascript">JavaScript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://isaac10.com'>isaac10.com</a></li>
            <li><a href='http://isaac10ui-demo.herokuapp.com'>isaac10 UI Demo</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="isaac10-api-documentation">isaac10 API Documentation</h1>

<p>Welcome the the <em>isaac10</em> documentation.</p>

          <h2 id="overview">Overview</h2>

<p><em>isaac10</em> offers four ways for integration. Please consult us to find out the
best fitting solution for you.</p>

<h3 id="hosted-pages">Hosted Pages</h3>

<p><em>isaac10</em> will host the forms for registering new customers and edit customer
accounts. Customers can log in independently from your website. You will get
notified about changes via configurable webhooks.</p>

<aside class="notice">
We are currently working on the documentation for the hosted pages. Please be
patient.
</aside>

<h3 id="rest-api">REST API</h3>

<p>The REST API marks the lowest integration level. It is meant for integration
with backend systems.</p>

<h3 id="javascript-api">JavaScript API</h3>

<p>The JavaScript library wraps the REST API. Use the JavaScript API to integrate
<em>isaac10</em> into your website.</p>

<h3 id="isaac10-ui">isaac10 UI</h3>

<p>The <em>issac10 UI</em> is an embeddable Ember.js application. Using the <em>isaac10 UI</em>
is the easiest way to integrate <em>isaac10</em> into your website.</p>

          <h2 id="api-integration">API Integration</h2>

<h3 id="rest-api">REST API</h3>

<p>The REST API can be used with any HTTP client. All API requests must use HTTPS
and need to be send to:</p>

<p><code class="prettyprint">https://your-subdomain.isaac10.com</code></p>

<p>Replace <code class="prettyprint">your-subdomain</code> with&hellip; well&hellip; your subdomain.</p>

<aside class="notice">
All <code>PATCH</code> requests may also be called as <code>PUT</code>
requests. This does not change the functionality: Although <code>PUT</code>
is meant to be used for replacing an entity, only the submitted data will be
altered. Present and non-submitted data will stay in place.
</aside>

<p>All REST API calls will respond with the JSON content described in the right
panel.</p>

<h3 id="javascript-api">JavaScript API</h3>

<p>Load the JavaScript library into the page and initialize the <code class="prettyprint">isaac10</code>
JavaScript object as shown on the right side.</p>

<p><code class="prettyprint">&lt;script type=&quot;text/javascript&quot; src=&quot;https://app.isaac10.com/api/v1/isaac10_api.js&quot;&gt;&lt;/script&gt;</code></p>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">isaac10</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Isaac10</span><span class="p">(</span><span class="s2">"your-subdomain"</span><span class="p">);</span>
</code></pre>

<p>All API functions are called on this object and return a Promise which passes
the JSON response of the API call to <code class="prettyprint">success</code> and <code class="prettyprint">failure</code>.</p>

          <h1 id="authentication">Authentication</h1>

          <h2 id="login">Login</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/api/v1/authenticate</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>

{
  "email": "you@example.com",
  "password": "customer password"
}
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="s1">'email'</span><span class="p">,</span> <span class="s1">'password'</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"customer_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100001"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"customer_token"</span><span class="p">:</span><span class="w">  </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"confirmed"</span><span class="p">:</span><span class="w">        </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="nt">"confirmed"</span><span class="p">:</span><span class="w">                 </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"request_confirmation_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://subdomain.isaac10.com/confirm/789"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>If you wish to outsource the customer authentication entirely to <em>isaac10</em>, you can request customer number and customer token, which are needed for the AUTHORIZE header or the JavaScript function <code class="prettyprint">.authenticateCustomer()</code> (explained in <a href="#customer-authentication">Customer Authentication</a>), with this API call.</p>

<p>If you are using the JavaScript library, <code class="prettyprint">.authenticateCustomer()</code> will be called automatically with the returned customer number and customer token after the request returns successfully.</p>

<aside class="notice">
There is no equivalent function for authenticating you as merchant.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>email</strong></td>
<td>Email address of the customer. <ul><li>required</li></ul></td>
</tr>
<tr>
<td><strong>password</strong></td>
<td>Password of the customer. <ul><li>required</li></ul></td>
</tr>
</tbody></table>

<p>If <code class="prettyprint">email</code> and <code class="prettyprint">password</code> are not matching, error 404 will be returned.</p>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong><br><strong>customer_token</strong></td>
<td>Customer number and customer token to be used for <a href="#customer-authentication">Customer Authentication</a>.</td>
</tr>
<tr>
<td><strong>confirmed</strong></td>
<td>Is the customer confirmed (i.e. clicked on the confirmation link send to her/him after the registration)? <code class="prettyprint">true</code> or <code class="prettyprint">false</code>.</td>
</tr>
<tr>
<td><strong>request_confirmation_url</strong></td>
<td>Only present when the customer is not confirmed. A GET request to this URL will trigger sending an email with the confirmation link to the customer.</td>
</tr>
</tbody></table>

          <h2 id="customer-authentication">Customer Authentication</h2>

<p>For using the functions regarding customer specific data, the customer has to be authenticated. The data required for authentication of the customer (API token, customer number) after a register request are returned as <code class="prettyprint">customer_token</code> and <code class="prettyprint">customer_number</code> and have to be stored in your system.</p>

<p>If you wish to outsource the authentication process entirely to our <em>isaac10</em> system, you need to embed the API call <a href="#login">authenticate - login of customer</a>, returning token and customer number.</p>

<h3 id="rest-api">REST API</h3>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/...</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Token token="&lt;customer_token&gt;"</span>
</code></pre>

<p>If a request requires the authentication of the customer, the customer&rsquo;s API token has to be sent within the <code class="prettyprint">Authorization</code> Header. The customer number, as part of the URL, has to be transferred as well.</p>

<h3 id="javascript-api">JavaScript API</h3>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">authenticateCustomer</span><span class="p">(</span><span class="s2">"&lt;customer_number&gt;"</span><span class="p">,</span> <span class="s2">"&lt;customer_token&gt;"</span><span class="p">);</span>
</code></pre>

<p>When using the JavaScript API the customer has to be authenticated <em>before</em> his first request of a protected function by using his customer number and his API token. The authentication itself works by the method <code class="prettyprint">.authenticateCustomer()</code> with an instance of the isaac10 object. (shown right)</p>

<p>The request <code class="prettyprint">authenticateCustomer()</code> itself <em>won&rsquo;t</em> create a HTTP request. The client&rsquo;s customer number as well as the customer token gets stored in the <em>isaac10</em> object and returned (if necessary) with every request.</p>
<pre class="highlight javascript"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isaac10</span><span class="p">.</span><span class="nx">customerNumber</span><span class="p">);</span>
<span class="c1">// =&gt; "&lt;customer_number&gt;"`</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isaac10</span><span class="p">.</span><span class="nx">customerApiToken</span><span class="p">);</span>
<span class="c1">// =&gt; "&lt;customer_api_token&gt;"`</span>
</code></pre>

<p>Once customer number and API token of the customer set, they can be displayed as properties of the <em>isaac10</em> object. (shown right)</p>

          <h2 id="merchant-authentication">Merchant Authentication</h2>

<p>In order to use the merchant&rsquo;s functions you have to authenticate with the system using your merchant API token. To find your merchant API token, see the merchant backend under the following section:</p>

<p><strong>Konfiguration &gt; Allgemeine Einstellungen</strong></p>

<h3 id="rest-api">REST API</h3>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/...</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Token token="&lt;merchant_token&gt;"</span>
</code></pre>

<p>If a request requires the authentication of the merchant, the merchant&rsquo;s API token has to be transferred within the <code class="prettyprint">Authorization</code> header.</p>

<h3 id="javascript-api">JavaScript API</h3>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">authenticateMerchant</span><span class="p">(</span><span class="s1">'merchant_token'</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isaac10</span><span class="p">.</span><span class="nx">merchantToken</span><span class="p">);</span>
<span class="c1">// =&gt; "merchant_token"</span>
</code></pre>

<p>When using the JavaScript API you have to authenticate yourself <em>before</em> your first request of a protected function by using your merchant API token. The authentication itself works by the method <code class="prettyprint">authenticateMerchant()</code> with an instance of the isaac10 object. (shown right)</p>

<p>Like the equivalent function for the customer, the request <code class="prettyprint">authenticateMerchant()</code> <em>won&rsquo;t</em> create a HTTP request. The merchant&rsquo;s API token gets stored in the <em>isaac10</em> object and returned (if necessary) with every request.</p>

<aside class="notice">
Both methods of authentication can be operated independently one of another. Both customer and merchant API token can be set at the same time. But keep in mind that the merchant token will grant access to the data of _every_ customer of the merchant. You should _never_ set the merchant token when a customer is logged in.
</aside>

          <h1 id="public-functions">Public Functions</h1>

          <h2 id="getproducts-retrieving-of-product-and-plan-data">getProducts - Retrieving of Product and Plan Data</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/products</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">getProducts</span><span class="p">();</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"product_name 1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"internal_product_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"internal_product_name"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"plans"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nt">"plan_name 1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID Tarif 1"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quarterly"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">],</span><span class="w">
              </span><span class="nt">"setup_fee"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nt">"plan_name 2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID Tarif 2"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
              </span><span class="nt">"setup_fee"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nt">"plan_name 3"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID Tarif 3"</span><span class="p">,</span><span class="w">
              </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                  </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
                  </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">],</span><span class="w">
              </span><span class="nt">"setup_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
              </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"product_name 2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This function can be used to display project data on websites. If there&rsquo;s no products set on the subdomain, an empty array with status 200 will be returned.</p>

          <h2 id="call-api-token-of-external-payment-service-providers">Call API Token of external Payment Service Providers</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/api_token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isaac10</span><span class="p">.</span><span class="nx">apiToken</span><span class="p">);</span>
<span class="c1">// =&gt; { "notLoaded": true }</span>

<span class="nx">isaac10</span><span class="p">.</span><span class="nx">withApiToken</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">isaac10</span><span class="p">.</span><span class="nx">apiToken</span><span class="p">);</span>
  <span class="c1">// =&gt; {</span>
  <span class="c1">//      "sandbox_mode":          true,</span>
  <span class="c1">//      "betterpayment_api_key": "123abc",</span>
  <span class="c1">//    }</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"api_token"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="nt">"sandbox_mode"</span><span class="p">:</span><span class="w">          </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
     </span><span class="nt">"betterpayment_api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123abc"</span><span class="w">
   </span><span class="p">}</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre>

<p>To be able to use external payment service providers (PSPs) within the system, you need to configure your merchant account by displaying their public API tokens. Those public API tokens can be called by this request.</p>

<aside class="notice">
This function is integrated in the JavaScript API. If an external API token for a function is required, he will automatically be called.   
<br>
<br>
    <strong>Using the JavaScript library, you never need to retrieve explicitly this external API token.</strong>  
  To retrieve it anyway, see JavaScript tab.
</aside>

          <h1 id="customer-registration">Customer Registration</h1>

<p>Customer registration is done in four steps:</p>

<ol>
<li><p><a href="#request-plan-data">Request the plan data</a> to receive all data that is
needed to display the registration form.</p></li>
<li><p>(optional) When the customer entered a coupon code, you may
<a href="#verification-of-coupon-code">check if the entered coupon code is valid</a>.</p></li>
<li><p><a href="#register">Register the customer</a> by submitting the entered
data for the customer account, subscription, billing address and payment
information.</p></li>
<li><p><a href="#confirmation-after-registration">Confirm the subscription</a> of the customer. <strong>This
step is mandatory.</strong> As long as a subscription is not confirmed, it will not
show up in your subscription overview and will not be accessible.</p></li>
</ol>

          <h2 id="request-plan-data">Request Plan Data</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/register/plan_nid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">getPlan</span><span class="p">(</span><span class="s1">'plan_nid'</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;plan_nid&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"product_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of the product"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"internal_product_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"internal name of the product"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"plan_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of the plan"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"public"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"logo_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://path/to/merchant/logo.png"</span><span class="p">,</span><span class="w">

    </span><span class="nt">"imprint_url_de"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/imprint_de"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"terms_of_use_url_de"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/terms_of_use_de"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"privacy_notice_url_de"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/privacy_notice_de"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"withdrawal_notice_url_de"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/withdrawal_notice_de"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"imprint_url_en"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/imprint_en"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"terms_of_use_url_en"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/terms_of_use_en"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"privacy_notice_url_en"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/privacy_notice_en"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"withdrawal_notice_url_en"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://example.com/withdrawal_notice_en"</span><span class="p">,</span><span class="w">

    </span><span class="nt">"success_redirect_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"instant_redirect"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">

    </span><span class="nt">"pricing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"brutto"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quarterly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">12000</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"setup_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">

    </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your API data you entered in the product configration"</span><span class="p">,</span><span class="w">

    </span><span class="nt">"always_ask_for_billing_and_payment_data"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">

    </span><span class="nt">"vat_b2c"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DE"</span><span class="p">,</span><span class="w"> </span><span class="nt">"percent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19.0"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CH"</span><span class="p">,</span><span class="w"> </span><span class="nt">"percent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11.0"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BE"</span><span class="p">,</span><span class="w"> </span><span class="nt">"percent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19.0"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">

    </span><span class="nt">"vat_b2c"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DE"</span><span class="p">,</span><span class="w"> </span><span class="nt">"percent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19.0"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CH"</span><span class="p">,</span><span class="w"> </span><span class="nt">"percent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11.0"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BE"</span><span class="p">,</span><span class="w"> </span><span class="nt">"percent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19.0"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"merchant_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DE"</span><span class="p">,</span><span class="w">

    </span><span class="nt">"additions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID of addition 1"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of addition 1"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quarterly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">1200</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"quantifiable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID of addition 2"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of addition 2"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quarterly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">2400</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nt">"quantifiable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"payment_data_logos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"visa"</span><span class="p">,</span><span class="w"> </span><span class="s2">"mastercard"</span><span class="p">],</span><span class="w">
    </span><span class="nt">"payment_data_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"invoice"</span><span class="p">,</span><span class="w"> </span><span class="s2">"elv_dtaus"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Request the data necessary to display the registration form.</p>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan_nid</strong> (in URL)</td>
<td>The NID of the plan</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<aside class="notice">
A description for all parameters will follow.
</aside>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>vat_b2b</strong></td>
<td>This key is only included when a B2B VAT list is assigned to the product of the plan.</td>
</tr>
</tbody></table>

          <h2 id="verification-of-coupon-code">Verification of Coupon Code</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/register/coupons/coupon_code?plan=plan_nid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">checkCouponCode</span><span class="p">(</span><span class="nx">coupon_code</span><span class="p">,</span> <span class="p">{</span><span class="s2">"plan_nid"</span><span class="p">:</span> <span class="s2">"&lt;plan_nid&gt;"</span> <span class="p">});</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
 </span><span class="nt">"coupon"</span><span class="p">:</span><span class="w">
 </span><span class="p">{</span><span class="w">
   </span><span class="nt">"coupon_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;coupon_code&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">1200</span><span class="p">,</span><span class="w">
   </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Erfolgsmeldung des Gutscheins"</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>coupon_code</strong></td>
<td>Code of the coupon</td>
</tr>
<tr>
<td><strong>plan_nid</strong></td>
<td>NID of the plan</td>
</tr>
</tbody></table>

          <h2 id="register">Register</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/api/v1/register</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Request Body / Params</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"register"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"plan_nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID of the plan"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w">

    </span><span class="nt">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"female"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dr."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Firstname"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lastname"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Company"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Street 42"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"City"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ustid"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">

    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invoice"</span><span class="p">,</span><span class="w">

    </span><span class="nt">"additions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID addition 1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID addition 2"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">

    </span><span class="nt">"coupon_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">

    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">

    </span><span class="nt">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"de"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan_nid</strong></td>
<td>The NID of the plan. <ul> <li>required</li> <li>plan must exist for this merchant</li> <li>plan must be enabled</li> </ul></td>
</tr>
<tr>
<td><strong>billing_interval</strong></td>
<td>The billing interval for the subscription. <ul> <li>required if plan is with costs</li> <li>allowed values: <code>&quot;monthly&quot;, &quot;quarterly&quot;, &quot;yearly&quot;</code></li> </ul></td>
</tr>
<tr>
<td><strong>additions</strong></td>
<td>Additions for the plan. <ul> <li>all additions must be related to the booked plan itself</li> </ul></td>
</tr>
<tr>
<td><strong>gender</strong></td>
<td>Gender of the subscribing customer. <ul> <li>required, when plan is with costs</li> <li>allowed values: <em>male, female</em></li> </ul></td>
</tr>
<tr>
<td><strong>first_name</strong></td>
<td>First name of the customer. <ul> <li>required, when plan is with costs</li> </ul></td>
</tr>
<tr>
<td><strong>last_name</strong></td>
<td>Last name of the customer. <ul> <li>required, when plan is with costs</li> </ul></td>
</tr>
<tr>
<td><strong>street</strong></td>
<td>Street name of the customer&rsquo;s address. <ul> <li>required, when plan is with costs</li> </ul></td>
</tr>
<tr>
<td><strong>zip</strong></td>
<td>Zip code of the customer&rsquo;s address. <ul> <li>required, when plan is with costs</li> </ul></td>
</tr>
<tr>
<td><strong>city</strong></td>
<td>City of the customer&rsquo;s address. <ul> <li>required, when plan is with costs</li> </ul></td>
</tr>
<tr>
<td><strong>country</strong></td>
<td>Name of the country of the customer&rsquo;s address. <ul> <li>required, when plan is with costs</li> <li>must be a double-digit country code</li> <li>must be included in the tax list</li> </ul></td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td>The payment method to use. The example shows <code class="prettyprint">invoice</code>. For all payment methods and the instructions to integrate them, see <a href="#payment-methods">Payment Methods</a> <ul> <li>required if plan is with costs</li> <li>for allowed values see <a href="#payment-methods">Payment Methods</a> </li> </ul></td>
</tr>
<tr>
<td><strong>coupon_code</strong></td>
<td>Code number of the coupon. <ul> <li>optional</li> <li>if coupon code is transferred, must be valuable and activated</li> </ul></td>
</tr>
<tr>
<td><strong>email</strong></td>
<td>Mail adress of the customer. <ul> <li>required</li> <li>has to contain the <code class="prettyprint">@</code> character</li> <li>must not have already been assigned to this subdomain or this merchant</li> </ul></td>
</tr>
<tr>
<td><strong>password</strong></td>
<td>Customer&rsquo;s password for Login. <ul> <li>required</li> <li>must contain at least 6 characters</li> </ul></td>
</tr>
<tr>
<td><strong>locale</strong></td>
<td>The language of the customer. <ul><li>optional (default: <code>&quot;de&quot;</code>)</li><li>allowed values: <code>&quot;de&quot;, &quot;en&quot;, &quot;fr&quot;, &quot;it&quot;, &quot;es&quot;</code></li></ul> When used in the JavaScript library and <strong>locale</strong> is not passed, the transmitted locale of the browser is used.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"customer_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000001"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"customer_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"plan_nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number, customer_token</strong></td>
<td>The customer number and customer token of the newly created account. Unless you want to <a href="#customer-authentication">use the login function of <em>isaac10</em> for authenticating your users</a>, you need to save these in your database for <a href="#customer-authentication">authenticating your customers</a>.</td>
</tr>
<tr>
<td><strong>plan_nid</strong></td>
<td>The NID of the subscribed plan.</td>
</tr>
<tr>
<td><strong>subscription_id</strong></td>
<td>The ID of the newly created subscription. You need it as a parameter for <a href="#confirmation-after-registration">confirming the subscription</a>.</td>
</tr>
</tbody></table>

          <h2 id="confirmation-after-registration">Confirmation after Registration</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customer/&lt;customer_nmber&gt;/thank_you/&lt;subscription_id&gt;/register?double_opt_in=true</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">thankYouAfterRegister</span><span class="p">(</span><span class="nx">subscription_id</span><span class="p">,</span> <span class="p">{</span> <span class="na">double_opt_in</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"product_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of the product"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"internal_product_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"internal name of the product"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"plan_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of the plan"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"begins_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"term_ends_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-18"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"next_billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ongoing"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quarterly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">12000</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"additions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (REST only)</td>
<td>Number identifying the customer.</td>
</tr>
<tr>
<td><strong>subscription_id</strong></td>
<td>ID of the subscription.</td>
</tr>
<tr>
<td><strong>double_opt_in</strong></td>
<td>Should a mail with a confirmation link be sent to the customer? <code class="prettyprint">true</code> or <code class="prettyprint">false</code> (optional, default: <code class="prettyprint">true</code>)</td>
</tr>
</tbody></table>

<aside class="notice">
Using this function, the transmission of the email informing the merchant about a new customer/new subscription as well as of the subscription confirmation email for the customer gets initiated. Therefore by using the <code>double_opt_in</code> it must be decided, whether an email for the customer is sent out or not.
</aside>

<p>Every of the following functions <a href="#register">register - Customer registration</a>, <a href="#adding-a-new-subscription">Adding a new Subscription</a> and <a href="#upgrading-downgrading-a-subscription">Upgrading/Downgrading</a> create a new data record for a subscription, not yet been confirmed. The ID of this subscription created will be used within the &ldquo;thank you&rdquo; functions, in order to confirm the newly created record. Consequently calling the &ldquo;thank you&rdquo; functions isn&rsquo;t optional.</p>

<p>All kind of emails for new registrations, double-opt-in and downgrade confirmations will also be initiated by the &ldquo;thank you&rdquo; functions.</p>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan</strong></td>
<td>This data is the same as returned by <a href="#request-plan-data">Request Plan Data</a></td>
</tr>
<tr>
<td><strong>subscription</strong></td>
<td>The confirmed subscription.</td>
</tr>
<tr>
<td><strong>subscription.product_name</strong></td>
<td>The name of the product.</td>
</tr>
<tr>
<td><strong>subscription.internal_product_name</strong></td>
<td>The internal name of the product.</td>
</tr>
<tr>
<td><strong>subscription.plan_name</strong></td>
<td>The name of the plan.</td>
</tr>
<tr>
<td><strong>subscription.begins_at</strong></td>
<td>The date when the subscription started. Since this is the response for a new registration, it will be today.</td>
</tr>
<tr>
<td><strong>subscription.term_ends_at</strong></td>
<td>The date when this term (= the first term) ends.</td>
</tr>
<tr>
<td><strong>subscription.billing_interval</strong></td>
<td>The chosen billing interval.</td>
</tr>
<tr>
<td><strong>subscription.next_billing_interval</strong></td>
<td>The billing interval after this term ends. Since this is the response for a new registration, it will be the same as the billing interval.</td>
</tr>
<tr>
<td><strong>subscription.status</strong></td>
<td>See <a href="#list-customer-subscriptions">List Customer Subscriptions</a>. Since this is the response for a new registration, it will be <code class="prettyprint">ongoing</code>.</td>
</tr>
<tr>
<td><strong>subscription.currency</strong></td>
<td>The currency.</td>
</tr>
<tr>
<td><strong>subscription.price</strong></td>
<td>The prices for the possible billing intervals.</td>
</tr>
<tr>
<td><strong>additions</strong></td>
<td>The subscribed additions.</td>
</tr>
</tbody></table>

          <h1 id="subscription-management">Subscription Management</h1>

          <h2 id="list-customer-subscriptions">List Customer Subscriptions</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customer/customer_number/subscriptions</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">getSubscriptions</span><span class="p">();</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w">                     </span><span class="mi">42</span><span class="p">,</span><span class="w">
      </span><span class="nt">"product_name"</span><span class="p">:</span><span class="w">          </span><span class="s2">"name of the product"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"internal_product_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"internal name of the product"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"plan_name"</span><span class="p">:</span><span class="w">             </span><span class="s2">"name of the plan"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"plan_nid"</span><span class="p">:</span><span class="w">              </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"begins_at"</span><span class="p">:</span><span class="w">             </span><span class="s2">"2014-09-25"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"term_ends_at"</span><span class="p">:</span><span class="w">          </span><span class="s2">"2014-10-24"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"billing_interval"</span><span class="p">:</span><span class="w">      </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"next_billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"status"</span><span class="p">:</span><span class="w">                </span><span class="s2">"ongoing"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"currency"</span><span class="p">:</span><span class="w">              </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"pricing"</span><span class="p">:</span><span class="w">               </span><span class="s2">"brutto"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"price"</span><span class="p">:</span><span class="w">                  </span><span class="mi">3000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"next_price"</span><span class="p">:</span><span class="w">             </span><span class="mi">3000</span><span class="p">,</span><span class="w">

      </span><span class="nt">"additions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"nid"</span><span class="p">:</span><span class="w">               </span><span class="s2">"NID of the addition"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w">              </span><span class="s2">"name of the addition"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"begins_at"</span><span class="p">:</span><span class="w">         </span><span class="s2">"2014-09-25"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"price"</span><span class="p">:</span><span class="w">              </span><span class="mi">200</span><span class="p">,</span><span class="w">
          </span><span class="nt">"next_price"</span><span class="p">:</span><span class="w">         </span><span class="mi">200</span><span class="p">,</span><span class="w">
          </span><span class="nt">"quantifiable"</span><span class="p">:</span><span class="w">       </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w">           </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nt">"next_quantity"</span><span class="p">:</span><span class="w">      </span><span class="mi">1</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="err">...</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">

      </span><span class="nt">"total_price"</span><span class="p">:</span><span class="w">            </span><span class="mi">3400</span><span class="p">,</span><span class="w">
      </span><span class="nt">"next_total_price"</span><span class="p">:</span><span class="w">       </span><span class="mi">3200</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The ID of the customer.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<p>An array of all subscriptions of the customer.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>begins_at</strong></td>
<td>The date when the subscription started.</td>
</tr>
<tr>
<td><strong>term_ends_at</strong></td>
<td>The date when the current term of the subscription ends.</td>
</tr>
<tr>
<td><strong>billing_interval</strong></td>
<td>The billing interval the customer has choosen for the current term: <code class="prettyprint">monthly</code>, <code class="prettyprint">quarterly</code> or <code class="prettyprint">yearly</code>.</td>
</tr>
<tr>
<td><strong>next_billing_interval</strong></td>
<td>The billing interval that gets valid when the next term starts: <code class="prettyprint">monthly</code>, <code class="prettyprint">quarterly</code> or <code class="prettyprint">yearly</code>.</td>
</tr>
<tr>
<td><strong>status</strong></td>
<td><em>see table below</em></td>
</tr>
<tr>
<td><strong>pricing</strong></td>
<td>Are prices gross or net? <code class="prettyprint">brutto</code> for gross, <code class="prettyprint">netto</code> for net (yes, these are the german terms).</td>
</tr>
<tr>
<td><strong>price</strong></td>
<td>Indication in cents for the current term of the subscription <em>without additions</em>.</td>
</tr>
<tr>
<td><strong>next_price</strong></td>
<td>Indication in cents for the next term of the subscription <em>without additions</em>.</td>
</tr>
<tr>
<td><strong>additions[]</strong></td>
<td>An array of all subscribed additions.</td>
</tr>
<tr>
<td><strong>additions[].begins_at</strong></td>
<td>The date when the addition was booked.</td>
</tr>
<tr>
<td><strong>additions[].price</strong></td>
<td>Indication in cents of the addition for the current term.</td>
</tr>
<tr>
<td><strong>additions[].next_price</strong></td>
<td>Indication in cents of the addition for the next term.</td>
</tr>
<tr>
<td><strong>additions[].quantifiable</strong></td>
<td>Is the addition quantifiable? <code class="prettyprint">true</code> or <code class="prettyprint">false</code>.</td>
</tr>
<tr>
<td><strong>additions[].quantity</strong></td>
<td>The subscribed quantity of the addition for the current term. Always <code class="prettyprint">1</code> when the addition is not quantifiable.</td>
</tr>
<tr>
<td><strong>additions[].next_quantity</strong></td>
<td>The quantity of the addition for the next term. When <code class="prettyprint">0</code> the addition will be canceled when the end of the term is reached.</td>
</tr>
<tr>
<td><strong>total_price</strong></td>
<td>Indication in cents for the current term of the subscription <em>including additions</em>.</td>
</tr>
<tr>
<td><strong>next_total_price</strong></td>
<td>Indication if cents for the next term of the subscription <em>including additions</em>.</td>
</tr>
</tbody></table>

<h3 id="status"><em>status</em></h3>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">ongoing</code></td>
<td>Subscription is active and not in cancellation</td>
</tr>
<tr>
<td><code class="prettyprint">canceled</code></td>
<td>Subscription is canceled, end of contract not reached yet</td>
</tr>
<tr>
<td><code class="prettyprint">expired</code></td>
<td>Subscription is canceled, end of the contract is reached</td>
</tr>
<tr>
<td><code class="prettyprint">future</code></td>
<td>Subscription contract starts in the future</td>
</tr>
</tbody></table>

          <h2 id="call-customer-and-plan-data">Call Customer and Plan data</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customer/customer_number/subscriptions/new?plan=plan_nid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">getSubscribe</span><span class="p">(</span><span class="nx">plan_nid</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">

  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The ID of the customer.</td>
</tr>
<tr>
<td><strong>plan_nid</strong></td>
<td>The NID of the plan.</td>
</tr>
</tbody></table>

<p>Account data of the customer and plan data can be called up in the same request.</p>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan</strong></td>
<td>This data is the same as provided when calling <code class="prettyprint">.getPlan()</code>.</td>
</tr>
<tr>
<td><strong>account</strong></td>
<td>This data is the same as provided when calling <code class="prettyprint">.getAccount()</code>.</td>
</tr>
</tbody></table>

          <h2 id="edit-a-subscription">Edit a Subscription</h2>

<p>Retrieve all necessary data to display an edit form for the subscription with the given <code class="prettyprint">subscription_id</code> and a table with all possible up- and downgrade options.</p>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customer/&lt;customer_number&gt;/subscriptions/&lt;subscription_id&gt;/edit</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">editSubscription</span><span class="p">(</span><span class="nx">subscription_id</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"billing_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"payment_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w">                     </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="nt">"product_name"</span><span class="p">:</span><span class="w">          </span><span class="s2">"name of the product"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"internal_product_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"internal name of the product"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"plan_name"</span><span class="p">:</span><span class="w">             </span><span class="s2">"name of the plan"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"begins_at"</span><span class="p">:</span><span class="w">             </span><span class="s2">"2014-09-25"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"term_ends_at"</span><span class="p">:</span><span class="w">          </span><span class="s2">"2014-10-24"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"billing_interval"</span><span class="p">:</span><span class="w">      </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"next_billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w">                </span><span class="s2">"ongoing"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w">              </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"pricing"</span><span class="p">:</span><span class="w">               </span><span class="s2">"brutto"</span><span class="p">,</span><span class="w">

    </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w">  </span><span class="mi">3000</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w">  </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">36000</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">

    </span><span class="nt">"additions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"nid"</span><span class="p">:</span><span class="w">               </span><span class="s2">"NID of the addition"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w">              </span><span class="s2">"name of the addition"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"begins_at"</span><span class="p">:</span><span class="w">         </span><span class="s2">"2014-09-25"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"quantifiable"</span><span class="p">:</span><span class="w">       </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w">           </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"next_quantity"</span><span class="p">:</span><span class="w">      </span><span class="mi">1</span><span class="p">,</span><span class="w">

        </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w"> </span><span class="nt">"cents"</span><span class="p">:</span><span class="w">  </span><span class="mi">1000</span><span class="w"> </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w"> </span><span class="nt">"interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w">  </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">12000</span><span class="w"> </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"allowed_transitions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID of the current plan"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Name of the current plan"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"transition_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"self"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID of another plan"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Name of another plan"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"transition_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"upgrade"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID of another plan"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Name of another plan"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"transition_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"downgrade"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
<tr>
<td><strong>subscription_id</strong> (in URL)</td>
<td>The ID of the subscription.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan</strong></td>
<td>Data of the plan. Same as <a href="#request-plan-data">Request Plan Data</a></td>
</tr>
<tr>
<td><strong>billing_data</strong></td>
<td>Data of the customer&rsquo;s billing address. Same as <a href="#get-customer-account-data">Get Account Data</a></td>
</tr>
<tr>
<td><strong>payment_data</strong></td>
<td>Data of the given payment method. Same as <a href="#get-customer-account-data">Get Account Data</a></td>
</tr>
<tr>
<td><strong>subscription</strong></td>
<td>Data of the subscription to edit.</td>
</tr>
<tr>
<td><strong>subscription.begins_at</strong><br><strong>subscription.term_ends_at</strong><br><strong>subscription.billing_interval</strong><br><strong>subscription.next_billing_interval</strong><br><strong>subscription.status</strong><br><strong>subscription.pricing</strong></td>
<td>Same as <a href="#get-subscriptions">Get Subscriptions</a></td>
</tr>
<tr>
<td><strong>subscription.price</strong></td>
<td>The prices for the possible billing intervals.</td>
</tr>
<tr>
<td><strong>subscription.additions[]</strong></td>
<td>An array of <em>all</em> additions, both subscribed and unsubscribed.</td>
</tr>
<tr>
<td><strong>subscription.additions[].begins_at</strong></td>
<td>The date when the addition was booked. Is <code class="prettyprint">null</code> when the addition is not booked.</td>
</tr>
<tr>
<td><strong>subscription.additions[].quantifiable</strong></td>
<td>Is the addition quantifiable? <code class="prettyprint">true</code> or <code class="prettyprint">false</code>.</td>
</tr>
<tr>
<td><strong>subscription.additions[].quantity</strong></td>
<td>The subscribed quantity of the addition for the current term. Is <code class="prettyprint">0</code> when the addition is not subscribed. Is <code class="prettyprint">1</code> when the addition is subscribed and not quantifiable.</td>
</tr>
<tr>
<td><strong>subscription.additions[].next_quantity</strong></td>
<td>The quantity of the addition for the next term. When <code class="prettyprint">0</code> the addition is either unsubscribed or will be canceled when the end of the term is reached.</td>
</tr>
<tr>
<td><strong>subscription.additions[].price</strong></td>
<td>The prices for the possible billing intervals of the addition. The allowed billing intervals will match those of the subscription itself (see above).</td>
</tr>
<tr>
<td><strong>allowed_transitions[]</strong></td>
<td>Additional information for Upgrading/Downgrading. The table includes <em>all</em> possible plans for up- and downgrading the subscription.</td>
</tr>
<tr>
<td><strong>allowed_transitions[].nid</strong></td>
<td>The NID of the plan to which can be up- or downgraded.</td>
</tr>
<tr>
<td><strong>allowed_transitions[].name</strong></td>
<td>The name of the plan to which can be up- or downgraded.</td>
</tr>
<tr>
<td><strong>allowed_transitions[].transition_type</strong></td>
<td><em>See table below</em></td>
</tr>
</tbody></table>

<h3 id="transition_type"><em>transition_type</em></h3>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">upgrade</code></td>
<td>Changing the subscription to this plan will be considered an <em>upgrade</em> and therefore will be valid immediately.</td>
</tr>
<tr>
<td><code class="prettyprint">downgrade</code></td>
<td>Changing the subscriptio to this plan will be considered a <em>downgrade</em> and therefore will be valid when the end of the current term is reached.</td>
</tr>
<tr>
<td><code class="prettyprint">self</code></td>
<td>The current plan. Listed in the array for convenience reasons.</td>
</tr>
</tbody></table>

<aside class="notice">
<strong>Why there are duplicate <code>price</code> arrays?</strong>
<br>
<br>
The response contains prices from the plan (in <code>plan.price</code> and <code>plan.additions[].price</code>) and the subscription (in <code>subscription.price</code> and <code>subscription.additions[].price</code>). These prices may differ since you as merchant can override the prices set in the plan in any specific subscription and addition of a customer.
<br>
<br>
If an addition is not subscribed, it will always show the prices defined in the plan.
</aside>

          <h2 id="call-of-account-subscription-and-plan-data">Call of Account, Subscription and Plan Data</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customer/customer_number/subscriptions/subscription_id/upgrade_downgrade/plan_nid</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">getUpgradeDowngradeSubscription</span><span class="p">(</span><span class="nx">subscription_id</span><span class="p">,</span> <span class="nx">plan_nid</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"begins_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-21"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"term_ends_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-10-20"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"next_billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ongoing"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"additions"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
<tr>
<td><strong>subscription_id</strong></td>
<td>The ID of the subscription.</td>
</tr>
<tr>
<td><strong>plan_nid</strong></td>
<td>The NID of the plan.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan</strong></td>
<td>This data is the same as provided when calling <code class="prettyprint">.getPlan()</code>.</td>
</tr>
<tr>
<td><strong>account</strong></td>
<td>This data is the same as provided when calling <code class="prettyprint">.getAccount()</code>.</td>
</tr>
<tr>
<td><strong>subscription</strong></td>
<td>Data of the created subscription.</td>
</tr>
</tbody></table>

          <h2 id="updating-a-subscription">Updating a Subscription</h2>
<pre class="highlight http"><code><span class="nf">PATCH</span> <span class="nn">/api/v1/customer/customer_number/subscriptions/subscription_id</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">updateSubscription</span><span class="p">(</span><span class="nx">subscription_id</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Request body / Params</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"additions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID Tarifergnzung 1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID Tarifergnzung 2"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID Tarifergnzung 3"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
<tr>
<td><strong>subscription_id</strong></td>
<td>The ID of the subscription.</td>
</tr>
</tbody></table>

<h3 id="validation">Validation</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>next_billing_interval</strong></td>
<td>The period of billing, offered by the merchant. <ul> <div style="text-align: left;"> <li>  required </li><li>  possible values: <code class="prettyprint">monthly</code>, <code class="prettyprint">quarterly</code>, <code class="prettyprint">yearly</code> </li>  <li> The billing interval must be enabled for the plan </li></ul></td>
</tr>
<tr>
<td><strong>additions</strong></td>
<td>The addition for a plan. <ul> <div style="text-align: left;"> <li> an addition with the given <strong>nid</strong> must exist for the plan to be changed </li><li>  <strong>quantify</strong> must be a natural number </li></ul></td>
</tr>
</tbody></table>

          <h2 id="upgrading-downgrading-a-subscription">Upgrading/Downgrading a Subscription</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/api/v1/customer/customer_number/subscriptions/subscription_id/upgrade_downgrade</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">upgradeDowngradeSubscription</span><span class="p">(</span><span class="nx">subscription_id</span><span class="p">,</span> <span class="nx">params</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Request body / Params</p>
</blockquote>
<pre class="highlight json"><code><span class="s2">"subscription"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nt">"plan_nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID of the plan"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"additions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID addition 1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID addition 2"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight json"><code><span class="s2">"subscription"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nt">"plan_nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID of the plan"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"additions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID addition 1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID addition 2"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"gender"</span><span class="p">:</span><span class="w">           </span><span class="s2">"female"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w">            </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Maxi"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w">        </span><span class="s2">"Mustermann"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"company"</span><span class="p">:</span><span class="w">          </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"street"</span><span class="p">:</span><span class="w">           </span><span class="s2">"Musterstrae 1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"zip"</span><span class="p">:</span><span class="w">              </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"city"</span><span class="p">:</span><span class="w">             </span><span class="s2">"Musterstadt"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"country"</span><span class="p">:</span><span class="w">          </span><span class="s2">"DE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ustid"</span><span class="p">:</span><span class="w">            </span><span class="s2">""</span><span class="p">,</span><span class="w">

  </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invoice"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"subscription_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3793</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
<tr>
<td><strong>subscription_id</strong></td>
<td>The ID of the subscription.</td>
</tr>
</tbody></table>

<h3 id="validations">Validations</h3>

<p>The validations and conditions for an upgrade/downgrade are the same as mentioned in chapter <a href="#adding-a-new-subscription">Adding a new Subscription</a>.</p>

<p>The conditions for billing address and billing method as mentioned below are the same for this call and, if necessary, must be transferred.</p>

          <h2 id="confirmation-after-upgrade-downgrade">Confirmation after Upgrade/Downgrade</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customer/customer_number/thank_you/subscription_id/upgrade_downgrade</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">thankYouAfterUpgradeDowngrade</span><span class="p">(</span><span class="nx">subscription_id</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
<tr>
<td><strong>subscription_id</strong></td>
<td>The ID of the subscription.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan</strong></td>
<td>This data is the same as provided when calling <code class="prettyprint">.getPlan()</code>.</td>
</tr>
<tr>
<td><strong>subscription</strong></td>
<td>This Data is the same as provided when calling <code class="prettyprint">.thankYouAfterRegister()</code>.</td>
</tr>
</tbody></table>

<p>As described in <a href="#confirmation-after-registration">Confirmation after Registration</a> the function <a href="#upgrading-downgrading-a-subscription">Upgrading/Downgrading a Subscription</a> creates a new data record for a subscription, not yet been confirmed. The created ID of this subscription will be used here, in order to confirm the newly created record.</p>

          <h2 id="adding-a-new-subscription">Adding a new Subscription</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/api/v1/customer/customer_number/subscriptions</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">addSubscription</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Request body / Params</p>

<ul>
<li>without costs</li>
</ul>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"plan_nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID of the plan"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"additions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID addition 1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID addition 2"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<ul>
<li>with costs (requires billing address/payment method)</li>
</ul>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"plan_nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID of the plan"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"additions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID addition 1"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> </span><span class="nt">"nid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NID addition 2"</span><span class="p">,</span><span class="w"> </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="p">],</span><span class="w">

    </span><span class="nt">"gender"</span><span class="p">:</span><span class="w">           </span><span class="s2">"female"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w">            </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Maxi"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w">        </span><span class="s2">"Mustermann"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"company"</span><span class="p">:</span><span class="w">          </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"street"</span><span class="p">:</span><span class="w">           </span><span class="s2">"Musterstrae 1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"zip"</span><span class="p">:</span><span class="w">              </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w">             </span><span class="s2">"Musterstadt"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"country"</span><span class="p">:</span><span class="w">          </span><span class="s2">"DE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ustid"</span><span class="p">:</span><span class="w">            </span><span class="s2">""</span><span class="p">,</span><span class="w">

    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invoice"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
</tbody></table>

<p><br>
<br></p>

<p>If the plan is with costs and neither billing address nor paymemt method have been given by the customer, the following data has to be transmitted for the subscription of the plan. (see right side)</p>

<aside class="notice">
If billing address and payment method are already given by the customer, this information will be ignored.
<br>
<strong> Updating the billing address and payment method is not possible by this API call. </strong>
</aside>

<h3 id="validation">Validation</h3>

<table>
  <tr>
    <th>Parameter</th>
    <th>Description</th>
  </tr>
  <tr>
    <td><strong>plan_nid</strong></td>
    <td>
      The NID of the plan.
      <ul>
        <li>required</li>
        <li>plan must exist for this merchant</li>
        <li>plan must be enabled</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td><strong>billing_interval</strong></td>
    <td>
      The billing interval for the subscription.
      <ul>
        <li>required if plan is with costs</li>
        <li>allowed values: <em>monthly, quarterly, yearly</em></li>
      </ul>
    </td>
  </tr>
  <tr>
    <td><strong>additions</strong></td>
    <td>
      Additions for the plan.
      <ul>
        <li>all additions must be related to the booked plan itself</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td><strong>gender</strong></td>
    <td>
      Gender of the subscribing customer.
      <ul>
        <li>required, when plan is with costs</li>
        <li>allowed values: <em>male, female</em></li>
      </ul>
    </td>
  </tr>
  <tr>
    <td><strong>first_name</strong></td>
    <td>
      First name of the customer.
      <ul>
        <li>required, when plan is with costs</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td><strong>last_name</strong></td>
    <td>
      Last name of the customer.
      <ul>
        <li>required, when plan is with costs</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td><strong>street</strong></td>
    <td>
      Street name of the customer&rsquo;s address.
      <ul>
        <li>required, when plan is with costs</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td><strong>zip</strong></td>
    <td>
      Zip code of the customer&rsquo;s address.
      <ul>
        <li>required, when plan is with costs</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td><strong>city</strong></td>
    <td>
      City of the customer&rsquo;s address.
      <ul>
        <li>required, when plan is with costs</li>
      </ul>
    </td>
  </tr>
  <tr>
    <td><strong>country</strong></td>
    <td>
      Name of the country of the customer&rsquo;s address.
      <ul>
        <li>required, when plan is with costs</li>
        <li>must be a double-digit country code</li>
        <li>must be included in the tax list</li>
      </ul>
    </td>
  </tr>
  <tr>
   <td><strong>payment_method</strong></td>
    <td>
      The payment method to use. The example shows <code>invoice</code>. For all
      payment methods and the instructions to integrate them, see
      <a href="#payment-methods">Payment Methods</a>.
      <ul>
        <li>required if plan is with costs</li>
        <li>
          for allowed values see <a href="#payment-methods">Payment Methods</a>
        </li>
      </ul>
    </td>
  </tr>
</table>

          <h2 id="confirmation-after-subscription">Confirmation after Subscription</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customer/customer_number/thank_you/subscription_id/add</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">thankYouAfterAdd</span><span class="p">(</span><span class="nx">subscription_id</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
<tr>
<td><strong>subscription_id</strong></td>
<td>The ID of the subscription.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan</strong></td>
<td>This data is the same as provided when calling <code class="prettyprint">.getPlan()</code>.</td>
</tr>
<tr>
<td><strong>subscription</strong></td>
<td>This Data is the same as provided when calling <code class="prettyprint">.thankYouAfterRegister()</code>.</td>
</tr>
</tbody></table>

<p>As described in <a href="#confirmation-after-registration">Confirmation after Registration</a> the function <a href="#adding-a-new-subscription">Adding a new Subscription</a> creates a new data record for a subscription, not yet been confirmed. The created ID of this subscription will be used here, in order to confirm the newly created record.</p>

          <h2 id="modify-subscription">Modify Subscription</h2>

<p>The modification of a subscription is identical to <a href="#adding-a-new-subscription">Adding a new Subscription</a>. <em>isaac10</em> verifies if a subscription for this product is already existing for the customer.</p>

<p>When upgrading, the plan modification becomes effective immediately whereas when downgrading the plan modification just starts at the end of the respective contract period.</p>

          <h2 id="cancelsubscription-cancel-a-subscription">cancelSubscription - Cancel a Subscription</h2>
<pre class="highlight http"><code><span class="nf">DELETE</span> <span class="nn">/api/v1/customer/customer_number/subscriptions/subscription_id</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">cancelSubscription</span><span class="p">(</span><span class="nx">subscription_id</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
<tr>
<td><strong>subscription_id</strong></td>
<td>The ID of the subscription.</td>
</tr>
</tbody></table>

          <h2 id="uncancelsubscription-uncancel-a-subscription">uncancelSubscription - Uncancel a Subscription</h2>
<pre class="highlight http"><code><span class="nf">DELETE</span> <span class="nn">/api/v1/customer/customer_number/subscriptions/subscription_id/revert</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">uncancelSubscription</span><span class="p">(</span><span class="nx">subscription_id</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
<tr>
<td><strong>subscription_id</strong></td>
<td>The ID of the subscription.</td>
</tr>
</tbody></table>

          <h1 id="account-functions">Account functions</h1>

          <h2 id="get-customer-account-data">Get Customer Account Data</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customer/&lt;customer_number&gt;/account</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">getAccount</span><span class="p">();</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"account_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w">           </span><span class="s2">"email@example.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">

    </span><span class="nt">"billing_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"gender"</span><span class="p">:</span><span class="w">          </span><span class="s2">"female"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="p">:</span><span class="w">           </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w">      </span><span class="s2">"Maxi"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Mustermann"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"company"</span><span class="p">:</span><span class="w">         </span><span class="s2">"Company"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"addition"</span><span class="p">:</span><span class="w">        </span><span class="s2">"Accounts Department"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"street"</span><span class="p">:</span><span class="w">          </span><span class="s2">"Musterstrae 1"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"zip"</span><span class="p">:</span><span class="w">             </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w">            </span><span class="s2">"Musterstadt"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"country"</span><span class="p">:</span><span class="w">         </span><span class="s2">"DE"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"ustid"</span><span class="p">:</span><span class="w">           </span><span class="s2">"DE1234567890"</span><span class="w">
    </span><span class="p">},</span><span class="w">

    </span><span class="nt">"payment_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w">  </span><span class="s2">"invoice"</span><span class="w">
    </span><span class="p">},</span><span class="w">

    </span><span class="nt">"payment_data_logos"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"visa"</span><span class="p">,</span><span class="w"> </span><span class="s2">"mastercard"</span><span class="p">],</span><span class="w">
    </span><span class="nt">"payment_data_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"invoice"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cc_paymill"</span><span class="p">,</span><span class="w"> </span><span class="s2">"elv_paymill"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>billing_data</strong></td>
<td>The billing data of the customer. When no billing address present, the returned value is <code class="prettyprint">&quot;none&quot;</code>.</td>
</tr>
<tr>
<td><strong>payment_data</strong></td>
<td>Specific data requested according to the method chosen. When returned it will <em>always</em> contain a <code class="prettyprint">payment_method</code> field. Further fields depend on the payment method used. See the <a href="#payment-methods">Payment Methods chapter</a> for further information. When no payment data present, the returned value is <code class="prettyprint">&quot;none&quot;</code>.</td>
</tr>
<tr>
<td><strong>payment_data_logos</strong></td>
<td>Logos of the different types of payment methods: <ul> <li>Visa</li> <li>Master Card</li> <li>American Express</li> <li>PayPal</li> </ul></td>
</tr>
<tr>
<td><strong>payment_data_types</strong></td>
<td>All possible payment methods of the merchant. Included for convenience reasons.</td>
</tr>
</tbody></table>

          <h2 id="updating-the-customer-39-s-account-data">Updating the Customer&rsquo;s Account Data</h2>
<pre class="highlight http"><code><span class="nf">PATCH</span> <span class="nn">/api/v1/customer/customer_number/account/account_data</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">updateAccountData</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Request body / Params</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"account_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new_email@example.com"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
</tbody></table>

<h3 id="validation">Validation</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>email</strong></td>
<td>The Email Address of the customer. <ul> <li>required</li> <li>has to contain the @ character</li> <li>must not have already been assigned to this subdomain or this merchant</li> </ul></td>
</tr>
</tbody></table>

          <h2 id="updating-the-customer-39-s-password">Updating the Customer&rsquo;s Password</h2>
<pre class="highlight http"><code><span class="nf">PATCH</span> <span class="nn">/api/v1/customer/customer_number/account/password</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">updatePassword</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Request body / Params</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new_password"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
</tbody></table>

<h3 id="validation">Validation</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>password</strong></td>
<td>The new password of the customer. <ul> <div style="text-align: left;"> <li>required</li> <li>must contain at least 6 characters</li> </ul></td>
</tr>
</tbody></table>

          <h2 id="updating-the-customer-39-s-billing-address">Updating the Customer&rsquo;s Billing Address</h2>
<pre class="highlight http"><code><span class="nf">PATCH</span> <span class="nn">/api/v1/customer/customer_number/account/billing_data</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">updateBillingData</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Request body / Params</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"billing_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"gender"</span><span class="p">:</span><span class="w">          </span><span class="s2">"female"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w">           </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w">      </span><span class="s2">"Vorname"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w">       </span><span class="s2">"Nachname"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"company"</span><span class="p">:</span><span class="w">         </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"street"</span><span class="p">:</span><span class="w">          </span><span class="s2">"Musterstrae 1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"zip"</span><span class="p">:</span><span class="w">             </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w">            </span><span class="s2">"Musterstadt"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ustid"</span><span class="p">:</span><span class="w">           </span><span class="s2">"DE1234567890"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Update the billing address of the passed customer. When the customer has no billing address, it will be created. However, the returned status code is <code class="prettyprint">200</code> in both cases.</p>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
</tbody></table>

<h3 id="validation">Validation</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>gender</strong></td>
<td>The gender of the customer. <ul> <div style="text-align: left;"> <li>required</li> <li>allowed values: <code class="prettyprint">male</code>, <code class="prettyprint">female</code></li> </ul></td>
</tr>
<tr>
<td><strong>first_name</strong></td>
<td>The first name of the customer. <ul> <div style="text-align: left;"> <li>required</li> </ul></td>
</tr>
<tr>
<td><strong>last_name</strong></td>
<td>The last name of the customer. <ul> <div style="text-align: left;"> <li>required</li> </ul></td>
</tr>
<tr>
<td><strong>street</strong></td>
<td>The street of the customer&rsquo;s billing address. <ul> <div style="text-align: left;"> <li>required</li> </ul></td>
</tr>
<tr>
<td><strong>zip</strong></td>
<td>The zip code of the customer&rsquo;s billing address. <ul> <div style="text-align: left;"> <li>required</li> </ul></td>
</tr>
<tr>
<td><strong>city</strong></td>
<td>The city of the customer&rsquo;s billing address. <ul> <div style="text-align: left;"> <li>required</li> </ul></td>
</tr>
</tbody></table>

          <h2 id="updating-the-customer-39-s-payment-method">Updating the Customer&rsquo;s Payment Method</h2>
<pre class="highlight http"><code><span class="nf">PATCH</span> <span class="nn">/api/v1/customer/customer_number/account/billing_data</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">updatePaymentData</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Request body / Params</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invoice"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
</tbody></table>

<h3 id="validation">Validation</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>payment_method</strong></td>
<td>The payment method chosen by the customer. <ul> <div style="text-align: left;"> <li>required</li> <li>allowed values: see <a href="#payment-methods">Payment Methods</a></li> </ul></td>
</tr>
</tbody></table>

          <h1 id="billing">Billing</h1>

          <h2 id="calling-the-customer-39-s-bills">Calling the Customer&rsquo;s Bills</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customer/customer_number/bills</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">getBills</span><span class="p">();</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"bills"</span><span class="p">:</span><span class="w">
    </span><span class="p">[</span><span class="w">
      </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill_cancelation"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"bill_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001/2015/X"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"canceled_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url/to/bill"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"bill_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001/2015"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"billed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-14"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">2000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url/to/bill"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_dunning"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"bill_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001/2015/1"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"billed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="p">,</span><span class="w">
          </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url/to/bill"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"type_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"first_dunning_cancelation"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"bill_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001/2015/1/X"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"canceled_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-19"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"cents"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="p">,</span><span class="w">
          </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url/to/bill"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>type_name</strong></td>
<td>The status of a bill or dunning. Possible types see below.</td>
</tr>
<tr>
<td><strong>cents</strong></td>
<td>Exposure the gross amount of an invoice in cents.</td>
</tr>
<tr>
<td><strong>url</strong></td>
<td>Contains the URL, displaying the download link for the bill. This is according to the API call <a href="#download-of-a-pdf-bill">Download of a PDF bill</a>.</td>
</tr>
</tbody></table>

<p>The field <code class="prettyprint">type_name</code>is according to the dunning level and other states a bill/dunning can have. Possible types are:</p>

<table><thead>
<tr>
<th>type_name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>bill</strong></td>
<td>normal bill</td>
</tr>
<tr>
<td><strong>first reminder</strong> <br> <strong>second reminder</strong></td>
<td>payment reminder</td>
</tr>
<tr>
<td><strong>first_dunning</strong>  <br> <strong>second_dunning</strong>  <br> <strong>third_dunning</strong></td>
<td>dunning</td>
</tr>
<tr>
<td><strong>bill_cancelation</strong> <br> <strong>first_dunning_cancelation</strong> <br> <strong>second_dunning_cancelation</strong> <br> <strong>third_dunning_cancelation</strong></td>
<td>Cancelation of a bill or dunning</td>
</tr>
</tbody></table>

<aside class="notice">
<strong>Why so complicated?</strong> <br>
To protect privacy, PDF files can&rsquo;t be downloaded directly. Before each download, a temporary URL has to be created. For system performance reasons we refrain from creating temporary URLs for each and every bill at each API call. The API call <a href="#download-of-a-pdf-bill"> Download of a PDF bill </a>  will be creating a temporary URL.
</aside>

<p><br></p>

<aside class="warning"> <strong> Please note</strong> <br>
If the PDF file is not rendered yet, the returned hash <em>won&rsquo;t</em> contain an <code>url</code>-key. This happens just in case, the customer opens this webpage briefly after the bill was released.
</aside>

          <h2 id="download-of-a-pdf-bill">Download of a PDF Bill</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customer/customer_number/bills/bill_slug/type_name</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">downloadBill</span><span class="p">(</span><span class="nx">url</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, the <a href="#customer-authentication">customer must be authenticated</a>.
</aside>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong> (in URL)</td>
<td>The number identifying the customer.</td>
</tr>
<tr>
<td><strong>bill_slug</strong></td>
<td>Designation of the bill.</td>
</tr>
<tr>
<td><strong>type_name</strong></td>
<td>Type of the bill.</td>
</tr>
</tbody></table>

<h3 id="rest-api">REST API</h3>

<p>The return value contains a temporary URL for the PDF file. It&rsquo;s validity is about one hour. A call of this temporary URL by a <code class="prettyprint">get</code> request returns a bill as PDF file.</p>

<h3 id="javascript-api">JavaScript API</h3>

<p>The call of the JavaScript function by calling the REST API creates a temporary URL. <strong>Subsequently the bill as PDF file is downloading.</strong> The temporary URL won&rsquo;t be returned.</p>

          <h1 id="merchant-functions">Merchant functions</h1>

          <h2 id="list-all-customers">List all customers</h2>

<p>List all customers of the merchant. Customers without an ongoing subscription are included, but deleted customers (shown as &ldquo;deleted&rdquo; in the customer listing in the merchant backend) are not.</p>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customers</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">getCustomers</span><span class="p">();</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"customers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"customer_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10001"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"customer_token"</span><span class="p">:</span><span class="w">  </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">

      </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"subscriptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="err">...</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, you must <a href="#merchant-authentication">authenticate yourself</a>.
</aside>

<h3 id="response">Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customers</strong></td>
<td>An array of all customers of the merchant.</td>
</tr>
<tr>
<td><strong>customer_number</strong><br><strong>customer_token</strong></td>
<td>Customer number and customer token to be used for <a href="#customer-authentication">Customer Authentication</a>.</td>
</tr>
<tr>
<td><strong>account</strong></td>
<td>The account data of the customer including billing address and payment data. See <a href="#get-customer-account-data">Get Customer Account Data</a>.</td>
</tr>
<tr>
<td><strong>subscriptions</strong></td>
<td>All subscriptions of the customer. See <a href="#list-customer-subscriptions">List Customer Subscriptions</a>.</td>
</tr>
</tbody></table>

          <h2 id="set-customer-custom-data">Set customer custom data</h2>
<pre class="highlight http"><code><span class="nf">PATCH</span> <span class="nn">/api/v1/customers/&lt;customer_number&gt;/custom_data</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">setCustomerCustomData</span><span class="p">(</span><span class="nx">customer_number</span><span class="p">,</span> <span class="nx">data</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Request body / Data</p>
</blockquote>
<pre class="highlight plaintext"><code>Whatever you want. Please use responsibly, this is not a challenge.
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>You may set custom data for any of your customers. The data can be anything, there are no validations. It will be stored as-is in the database. To read the data see <a href="#get-customer-custom-data">Get customer custom data</a>.</p>

<aside class="success">
Before making the function call, you must <a href="#merchant-authentication">authenticate yourself</a>.
</aside>

          <h2 id="get-customer-custom-data">Get customer custom data</h2>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/api/v1/customers/&lt;customer_number&gt;/custom_data</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">getCustomerCustomData</span><span class="p">(</span><span class="nx">customer_number</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight plaintext"><code>Whatever you set at the customer. The content type "text/plain" is used.
</code></pre>

<p>Retrieve the data you set with <a href="#set-customer-custom-data">Set customer custom data</a>.</p>

<aside class="success">
Before making the function call, you must <a href="#merchant-authentication">authenticate yourself</a>.
</aside>

          <h2 id="creating-an-extra-bill-item">Creating an extra bill item</h2>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/api/v1/bill_items</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">createBillItem</span><span class="p">(</span><span class="nx">params</span><span class="p">);</span>
</code></pre>

<blockquote>
<p>Request body / Params</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"bill_item"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"customer_number"</span><span class="p">:</span><span class="w">       </span><span class="s2">"100001"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"internal_product_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"internal product_name"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"invoice_text"</span><span class="p">:</span><span class="w">          </span><span class="s2">"Text, being displayed on the bill"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"amount_cents"</span><span class="p">:</span><span class="w">          </span><span class="s2">"2000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w">              </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"vat"</span><span class="p">:</span><span class="w">                   </span><span class="s2">"19.0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"billed_from"</span><span class="p">:</span><span class="w">           </span><span class="s2">"2015-03-12"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"billed_to"</span><span class="p">:</span><span class="w">             </span><span class="s2">"2015-04-11"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="success">
Before making the function call, you must <a href="#merchant-authentication">authenticate yourself</a>.
</aside>

<h3 id="validation">Validation</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>customer_number</strong></td>
<td><ul> <li>required </li> <li>must exist and be one of your customers </li>  </ul></td>
</tr>
<tr>
<td><strong>internal_product_name</strong></td>
<td><ul> <li>required </li> <li>must exist and be one of your products </li>  </ul></td>
</tr>
<tr>
<td><strong>invoice_text</strong></td>
<td><ul> <li>required </li> </ul></td>
</tr>
<tr>
<td><strong>amount_cents</strong></td>
<td><ul> <li>required </li> <li> must be in form of a whole number </li> </ul></td>
</tr>
<tr>
<td><strong>quantity</strong></td>
<td><ul><li>required</li><li>must be in form of a whole number</li><li>must be greater than zero</li></ul></td>
</tr>
<tr>
<td><strong>vat</strong></td>
<td><ul> <li>required </li> <li> must be in form of a decimal number, containing a point as decimal separator</li><li>must be greater than zero</li> </ul></td>
</tr>
<tr>
<td><strong>billed_from</strong></td>
<td>The start date of the bill item.<ul><li>required</li><li>must be in form of a date according to ISO-8601 (YYYY-MM-DD)</li></ul></td>
</tr>
<tr>
<td><strong>billed_to</strong></td>
<td>(optional) The end date of the bill item. When no end date is given, only the start date will be displayed on the bill. <ul><li>must be in form of a date according to ISO-8601 (YYYY-MM-DD)</li><li>must lie after the <code class="prettyprint">bill_from</code> date</li></ul></td>
</tr>
</tbody></table>

<aside class="notice">
<strong>How to create a credit item?</strong><br><br>
To create a credit item, just put a negative amount for <code>amount_cents</code>.
</aside>

          <h1 id="payment-methods">Payment Methods</h1>

          <h2 id="possible-payment-methods">Possible Payment Methods</h2>

<p>isaac10 supports the following payment methods:</p>

<ul>
<li>  on <a href="#invoice">invoice</a></li>
<li>  <a href="#direct-debit-sepa">direct debit (SEPA)</a></li>
<li>  <a href="#credit-card">credit card</a></li>
<li>  <a href="#paypal">PayPal</a></li>
</ul>

<p>The parameter <code class="prettyprint">payment_method</code> specifies, which payment method gets stored. Each payment method requires different additional parameter.</p>

<p>Depending on the payment method chosen, the output also differs in <code class="prettyprint">payment_data</code> when calling the customer&rsquo;s data.</p>

          <h2 id="invoice">Invoice</h2>

<blockquote>
<p>Parameters for request body
<em>(full request body depends on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invoice"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>For payment upon invoicing no further specifications are necessary.</p>

<blockquote>
<p>Response values for payment data
<em>(full response depends on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invoice"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="integration-with-javascript-library">Integration with JavaScript library</h3>

<p>As payment on invoice doesn&rsquo;t require further specifications, transferring the value <code class="prettyprint">invoice</code> is sufficient.</p>

          <h2 id="direct-debit-sepa">Direct Debit (SEPA)</h2>

<p>For the payment upon direct debit (SEPA) <em>isaac10</em> offers two different methods:</p>

<ul>
<li>  integration of Micropayment: <code class="prettyprint">&quot;payment_method&quot;: &quot;elv_micropayment&quot;</code></li>
<li>  creation of SEPA-XML files, which you can deposit yourself at the bank: <code class="prettyprint">&quot;payment_method&quot;: &quot;elv_dtaus&quot;</code>. This method is traditionally known as &ldquo;garage clearing&rdquo;.</li>
</ul>

<blockquote>
<p>Parameters for request body / params when Micropayment is used<br>
<em>(full request body / params depend on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"elv_micropayment"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"account_holder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of account holder"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"iban"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the IBAN"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response values for payment data when Micropayment is used<br>
<em>(full response depends on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"elv_micropayment"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"account_holder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of account holder"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"iban"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the IBAN"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Parameters for request body / params when garage clearing is used<br>
<em>(full request body / params depend on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"elv_dtaus"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"addr_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of account holder"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"bank_iban"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the IBAN"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response values for payment data when garage clearing is used<br>
<em>(full response depends on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"elv_dtaus"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"account_holder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of account holder"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"iban"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the IBAN"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>account_holder</strong> or <strong>addr_name</strong></td>
<td><ul> <li>required </li>  </ul></td>
</tr>
<tr>
<td><strong>iban</strong> or <strong>bank_iban</strong></td>
<td><ul> <li>required </li> <li>must be an existing IBAN </li>  </ul></td>
</tr>
</tbody></table>

<h3 id="integration-with-javascript-library">Integration with JavaScript library</h3>

<p>Account holder and IBAN can be called directly and be transferred to the respective JavaScript function. The transfer to Micropayment (elv_micropayment) will be made by <em>isaac10</em> on the server side. Regarding SEPA-XML files (elv_dtaus), data will be stored by <em>isaac10</em> itself.</p>

          <h2 id="credit-card">Credit Card</h2>

<p>For the payment by credit card <em>isaac10</em> offers two different methods:</p>

<ul>
<li>  <em>isaac10</em>&rsquo;s own integration: <code class="prettyprint">&quot;payment_method&quot;: &quot;cc_betterpayment&quot;</code>. This is a white label solution provided by <a href="http://betterpayment.de/">Better Payment</a></li>
<li>  Micropayment integration: <code class="prettyprint">&quot;payment_method&quot;: &quot;cc_micropayment&quot;</code>.</li>
</ul>

<aside class="warning">
<strong> Payment by credit card with Micropayment is not yet implemented</strong><br>
This documentation is ahead of its time. The payment method <code>cc_micropayment</code> is scheduled for delivery in the next release.
</aside>

<p>A transfer of credit card information with the REST API is not possible for legal reasons. Credit card numbers <em>must never</em> be transferred to your or our servers. Therefore only a client side integration through an iframe, directly provided by the payment provider, is a possible solution. However, in case you did the client side integration of the iframe yourself, the returned tokens can be transferred to <em>isaac10</em> through the REST API.</p>

<h3 id="request-body-for-rest-integration-cc_betterpayment">Request body for REST integration: <code class="prettyprint">cc_betterpayment</code></h3>

<blockquote>
<p>Parameters for request body when Better Payment is used<br>
<em>(full request body depends on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc_betterpayment"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction-ID of Better Payment"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>To identify a payment transaction, Better Payment uses a <code class="prettyprint">transaction_id</code>. Also the transfer of credit card information without immediate processing of a payment transaction (method used by <em>isaac10</em>) is treated in the same way. After a successful transfer of credit card information to Better Payment, the <code class="prettyprint">transaction_id</code> can be sent over to <em>isaac10</em>.</p>

<h3 id="response-cc_betterpayment">Response: <code class="prettyprint">cc_betterpayment</code></h3>

<blockquote>
<p>Response values for payment data when Better Payment is used<br>
<em>(full response depends on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cc_betterpayment"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expire_month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"03"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"expire_year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"card_last4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>expire_month</strong> and <strong>expire_year</strong></td>
<td>The expiry date of the credit card.</td>
</tr>
<tr>
<td><strong>card_last4</strong></td>
<td>The last four digits of the credit card number.</td>
</tr>
</tbody></table>

<h3 id="request-body-for-rest-integration-cc_micropayment">Request body for REST integration: <code class="prettyprint">cc_micropayment</code></h3>

<blockquote>
<p>Parameters for request body when Micropayment is used
<em>(full request body depends on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="err">TODO</span><span class="w">
</span></code></pre>

<p>TODO</p>

<h3 id="response-cc_micropayment">Response: <code class="prettyprint">cc_micropayment</code></h3>

<blockquote>
<p>Response values for payment data when Micropayment is used
<em>(full response depends on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="err">TODO</span><span class="w">
</span></code></pre>

<p>TODO</p>

<h3 id="integration-with-javascript-library">Integration with JavaScript library</h3>

<blockquote>
<p>Integration Example for JavaScript</p>
</blockquote>
<pre class="highlight html"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
      <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">function</span> <span class="nx">registerParams</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">email</span><span class="p">:</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'#email'</span><span class="p">).</span><span class="nx">val</span><span class="p">();</span>
            <span class="cm">/* all further data */</span>
          <span class="p">};</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'#payment_method_elv_micropayment:checked'</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="p">{</span> <span class="na">payment_method</span><span class="p">:</span> <span class="s1">'elv_micropayment'</span><span class="p">,</span>
                               <span class="na">account_holder</span><span class="p">:</span> <span class="s1">'read value'</span><span class="p">,</span>
                               <span class="na">iban</span><span class="p">:</span>           <span class="s1">'read value'</span> <span class="p">});</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'payment_method_cc_betterpayment:checked'</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="p">{</span> <span class="na">payment_method</span><span class="p">:</span> <span class="s1">'cc_betterpayment'</span> <span class="p">});</span>
          <span class="p">}</span>

          <span class="k">return</span> <span class="nx">params</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="cm">/*  initialize isaac10 library */</span>
        <span class="kd">var</span> <span class="nx">isaac10</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Isaac10</span><span class="p">(</span><span class="s1">'my-subdomain'</span><span class="p">);</span>

        <span class="cm">/* when payment with credit card is choosen: display iframe */</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">'#payment_method_cc_betterpayment'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'change'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'#payment_method_cc_betterpayment:checked'</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">isaac10</span><span class="p">.</span><span class="nx">displayCreditCardiframe</span><span class="p">(</span><span class="s1">'#credit-card-iframe'</span><span class="p">,</span> <span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">});</span>

        <span class="cm">/* when "Place Order" is clicked: send values to payment provider and
           isaac10 */</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">'#register-form'</span><span class="p">).</span><span class="nx">submit</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
          <span class="nx">isaac10</span><span class="p">.</span><span class="nx">register</span><span class="p">({</span><span class="na">register</span><span class="p">:</span> <span class="nx">registerParams</span><span class="p">()});</span>
        <span class="p">});</span>
      <span class="p">});</span>
    <span class="nt">&lt;/script&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Register<span class="nt">&lt;/h1&gt;</span>

    <span class="c">&lt;!-- register file --&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"register-form"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">id=</span><span class="s">"email"</span> <span class="nt">/&gt;</span>
      <span class="c">&lt;!-- ...and all further information requested --&gt;</span>

      <span class="c">&lt;!-- radio buttons for choosing payment method --&gt;</span>
      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"payment_method_elv_micropayment"</span><span class="nt">&gt;</span>
        SEPA
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"radio"</span>
               <span class="na">name=</span><span class="s">"payment_method"</span>
               <span class="na">value=</span><span class="s">"elv_micropayment"</span>
               <span class="na">id=</span><span class="s">"payment_method_elv_micropayment"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"payment_method_cc_betterpayment"</span><span class="nt">&gt;</span>
        credit card
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"radio"</span>
               <span class="na">name=</span><span class="s">"payment_method"</span>
               <span class="na">value=</span><span class="s">"cc_betterpayment"</span>
               <span class="na">id=</span><span class="s">"payment_method_cc_betterpayment"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/label&gt;</span>

      <span class="c">&lt;!-- iframe to transfer credit card data --&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"credit-card-iframe"</span><span class="nt">&gt;&lt;/div&gt;</span>

      <span class="c">&lt;!-- submit button for registration --&gt;</span>
      <span class="nt">&lt;button&gt;</span>Place Order<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>

<p>The JavaScript library (in comparison to an own implementation) offers an easy integration into your front end. The procedure is the same for both, <code class="prettyprint">elv_betterpayment</code> and <code class="prettyprint">elv_micropayment</code>. Implementation procedure is as follows:</p>

<p><strong>1. Place a <code class="prettyprint">&lt;div&gt;</code> in the HTML code</strong></p>

<p>where the iframe for the credit card form should be placed into.</p>

<p><strong>2. Display the credit card iframe</strong></p>

<p>by calling the function <code class="prettyprint">isaac10.displayCreditCardiframe(selector, width, height)</code>. The call and therefore the display can be linked to a JavaScript event, e.g. choosing a radio button.</p>

<ul>
<li>  <strong>selector</strong> is the jQuery selector for the <code class="prettyprint">&lt;div&gt;</code>, where the iframe shall be rendered</li>
<li>  <strong>width</strong> and <strong>height</strong> are the dimensions of the iframe</li>
</ul>

<p><strong>3. Transmit the credit card data</strong></p>

<p>by calling one of the functions that transmit payment data to <em>isaac10</em> (e.g. registration of a new customer with <code class="prettyprint">isaac10.register(...)</code> or updating of payment data <code class="prettyprint">isaac10.updatePaymentData(...)</code>). Pass <code class="prettyprint">&quot;payment_method&quot;: &quot;cc_betterpayment&quot;</code> or <code class="prettyprint">&quot;payment_method&quot;: &quot;cc_micropayment&quot;</code> as payment method in the params hash <em>without any additional data</em>. This can be linked to a JavaScript event too, e.g. clicking a button <code class="prettyprint">Place Order</code>.</p>

<p>The JavaScript library identifies the payment method and understands that the iframe got loaded and the customer entered his payment data in the iframe. The transmission of the data to Better Payment/Micropayment and the processing of the return values is done internally in the library. Then the transmission of the payment data (and all further information, depending on the called function) to <em>isaac10</em> will be executed.</p>

<p>The example on the right shows the use of the JavaScript library to build a registration page. Please note that it is only complete for credit card payment. There is a radio button for SEPA payment but the necessary text fields for IBAN and account holder are missing. We will provide a complete example soon.</p>

          <h2 id="paypal">PayPal</h2>

<blockquote>
<p>Parameters for request body<br>
<em>(full request body depends on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paypal"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Response values for payment data<br>
<em>(full response depends on request)</em></p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paypal"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="params">Params</h3>

<p>For the payment with PayPal no further parameters (aside from <code class="prettyprint">&quot;payment_method&quot;: &quot;paypal&quot;</code>) need to be passed.</p>

<p>However, when using the REST integration, you must pass special <code class="prettyprint">successURL</code>s and <code class="prettyprint">failureURL</code>s to the PayPal API to make PayPal send the billing agreement back to <em>issac10</em> and not directly to your website. (Description TODO)</p>

<p>When using the JavaScript library, the billing agreement of PayPal is sent to <em>isaac10</em> automatically. This is described below.</p>

<h3 id="setup-in-merchant-configuration">Setup in Merchant Configuration</h3>

<p>The input mask for your PayPal ID (normally your email address with PayPal) and the display of given agreements on behalf of PayPal, as far as this payment method is activated for you, can be found in</p>

<p><strong>Settings &gt; Payment methods</strong></p>

<aside class="notice">
To be able to use the checkout express, place billing agreements for recurring payment in order and charge your customers on your behalf. You need to grant us the appropriate permissions. By clicking on &ldquo;Set Permission&rdquo; you&rsquo;ll be forwarded to the PayPal Merchant Domain, where you can grant the appropriate permissions. Afterwards you&rsquo;ll be backwarded to your <em>isaac10</em> merchant backend again.
</aside>

<h3 id="integration-with-javascript-library">Integration with JavaScript library</h3>

<p>With our <em>isaac10</em> JavaScript library you can call up the <a href="https://developer.paypal.com/docs/classic/express-checkout/in-context/">In-Context-Express-Checkout</a> by what PayPal customers conclude a billing agreement with the merchant.
This billing agreement will be maintained in the background by <em>isaac10</em> in order to use it for further debiting.</p>

<p>Please follow these steps:</p>

<p><strong>1. Call a function which transfers the payment data</strong></p>

<p>e.g. <code class="prettyprint">.register()</code> or <code class="prettyprint">.updatePaymentData()</code> and pass <code class="prettyprint">&quot;payment_method&quot;: &quot;paypal&quot;</code> in the params.</p>

<p><strong>2. In case of registration: Authenticate the customer</strong></p>

<p>by using the customer number and customer token received by step 1. This is unnecessary if you changed the payment data of an existing customer. The authentication must have been already done in this case (otherwise you could not have called the function for changing the payment data in the first place).</p>

<p><strong>3. Call the function to process PayPal</strong></p>

<p>which is named <code class="prettyprint">.processPaypal(successURL, failureURL)</code>.</p>

<ul>
<li>  <strong>successURL:</strong> PayPal redirects to this URL in case the customer confirms the payment via PayPal.</li>
<li>  <strong>failureURL:</strong> PayPal redirects to this URL in case the customer cancels the payment via PayPal.</li>
</ul>

<p>After the call the express checkout window by PayPal will open which redirects the customer to PayPal. Please keep in mind that you have to call the subscription confirmation (<a href="#confirmation-after-registration">Confirmation after Registration</a>, <a href="#confirmation-after-upgrade-downgrade">Confirmation after Upgrade/Downgrade</a> or <a href="#confirmation-after-subscription">Confirmation after Subscription</a>) when the <code class="prettyprint">successURL</code> is opened.</p>

          <h1 id="isaac10-ui">isaac10 UI</h1>

          <h2 id="embedding-and-initialization">Embedding and Initialization</h2>

<blockquote>
<p>Embedding and Initialization</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://app.isaac10.com/api/v1/isaac10_api.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"https://app.isaac10.com/ui/isaac10_ui.js"</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
  <span class="c1">// Initialization of JavaScript API</span>
  <span class="kd">var</span> <span class="nx">isaac10</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Isaac10</span><span class="p">(</span><span class="s2">"your-subdomain"</span><span class="p">);</span>

  <span class="c1">// Initialization of isaac10 UI</span>
  <span class="nx">isaac10UI</span><span class="p">.</span><span class="nx">setup</span><span class="p">({</span>
    <span class="s2">"isaac10Instance"</span><span class="p">:</span> <span class="nx">isaac10</span><span class="p">,</span>
    <span class="s2">"fetchTemplate"</span><span class="p">:</span>  <span class="s2">"bootstrap3"</span><span class="p">,</span>
    <span class="s2">"locale"</span><span class="p">:</span>         <span class="s2">"de"</span>
  <span class="p">}).</span><span class="nx">render</span><span class="p">(</span><span class="s2">"#isaac10-ui"</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>

<blockquote>
<p>Rendering</p>
</blockquote>
<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"isaac10-ui"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre>

<p>To be able to use the <em>isaac10 UI</em>, the JavaScript library of <em>isaac10</em> must be loaded as well.
See right side, for how to initialize the <em>isaac10 UI</em> and render it on your website.</p>

<h3 id="configuration">Configuration</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Possible Values</th>
</tr>
</thead><tbody>
<tr>
<td><strong>isaac10Instance</strong></td>
<td></td>
<td>An instance of the <code class="prettyprint">Isaac10</code> object.</td>
</tr>
<tr>
<td><strong>fetchTemplate</strong></td>
<td>the HTML templates (or handlebar templates) to be loaded</td>
<td><ul><li><code class="prettyprint">false</code> (no templates will be loaded, you have to provide the templates yourself)</li><li><code class="prettyprint">&quot;bootstrap3&quot;</code></li></ul></td>
</tr>
<tr>
<td><strong>overrideTranslations</strong></td>
<td>See <a href="#overwriting-and-adding-translations">Overwriting and Adding Translations</a></td>
<td>A JavaScript object, structured like a translation file.</td>
</tr>
<tr>
<td><strong>locale</strong></td>
<td>The language that should be used in the <em>isaac10 UI</em></td>
<td><ul><li> <code class="prettyprint">&quot;de&quot;</code> (german)</li><li><code class="prettyprint">&quot;en&quot;</code> (english)</li></ul> More languages can be added through the <strong>overrideTranslations</strong> parameter.</td>
</tr>
</tbody></table>

<h3 id="display-the-isaac10-ui">Display the isaac10-UI</h3>

<p>The call of <code class="prettyprint">.render()</code> rendered the <em>isaac10 UI</em> in the HTML element, referenced by the passed jQuery selector (as shown in the given example: the element with ID <code class="prettyprint">#isaac10-ui</code>). The element should be a <code class="prettyprint">&lt;div&gt;</code> tag but can be anything else.</p>

<h3 id="navigating-through-the-isaac10-ui">Navigating through the isaac10-UI</h3>

<p>The page to be displayed is controlled by an URL anchor. If the <em>isaac10 UI</em> is rendered on a page with an URL without anchor, only a test page will be displayed, stating: <strong>isaac10-UI works!</strong></p>

<p>The following pages are available:</p>

<ul>
<li>  the <a href="#registration-page-for-new-customers">Registration Page for new Customers</a></li>
<li>  Overview and forms for account data</li>
<li>  bills overview</li>
<li>  subscriptions overview and forms to have the subscriptions managed</li>
</ul>

<p>More pages can be reached by clicking on the links on these pages.</p>

          <h2 id="customer-specific-pages">Customer specific Pages</h2>
<pre class="highlight javascript"><code><span class="nx">isaac10</span><span class="p">.</span><span class="nx">authenticateCustomer</span><span class="p">(</span><span class="s2">"&lt;customer_number&gt;"</span><span class="p">,</span> <span class="s2">"&lt;customer_token&gt;"</span><span class="p">);</span>
</code></pre>

<p>To display the pages and forms involving account-, billing- and subscription-data the customer need to get authenticated via the JavaScript-API (see Javascript tab).</p>

<p>You receive the parameter <code class="prettyprint">customer_number</code> and <code class="prettyprint">customer_token</code> with the form on <a href="#registration-page-for-new-customers">Registration Page for new Customers</a> (or alternatively by <a href="#register">Register a Customer via API</a>).</p>

<h3 id="url-anchors">URL anchors</h3>

<table><thead>
<tr>
<th>Called Page</th>
<th>Anchor</th>
</tr>
</thead><tbody>
<tr>
<td>account data</td>
<td><strong>#/account</strong></td>
</tr>
<tr>
<td>billing data</td>
<td><strong>#/bills</strong></td>
</tr>
<tr>
<td>subscription data</td>
<td><strong>#/subscriptions</strong></td>
</tr>
</tbody></table>

          <h2 id="registration-page-for-new-customers">Registration Page for new Customers</h2>

<h3 id="url-anchor">URL anchor</h3>

<p>#/plan/plan_nid</p>

<h3 id="params">Params</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan_nid</strong></td>
<td>The NID of the plan.</td>
</tr>
</tbody></table>

<h3 id="transfer-data-to-your-system">Transfer Data to your System</h3>

<p>Please go to your merchant-backend</p>

<p><strong>Settings &gt; Integration settings</strong></p>

<p>This area offers you options to modify the register webhooks. You can chose a HTTP method (GET/POST) and enter an URL. By completing a new registration successfully the data will be transferred to the configured URL using the chosen HTTP-method.</p>

<p>Please file the values of <code class="prettyprint">customer_number</code> und <code class="prettyprint">customer_api_token</code> in your system. They are needed to <a href="#customer-authentication">authenticate the customer</a> and therefore to display the overview pages.</p>

          <h2 id="overwriting-and-adding-translations">Overwriting and Adding Translations</h2>
<pre class="highlight javascript"><code><span class="c1">// your translations</span>
<span class="kd">var</span> <span class="nx">customTranslations</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"de"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"defaults"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"save"</span><span class="p">:</span> <span class="s2">"send"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Initializing the JavaScript API</span>
<span class="kd">var</span> <span class="nx">isaac10</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Isaac10</span><span class="p">(</span><span class="s2">"ihre-subdomain"</span><span class="p">);</span>

<span class="c1">// Initializing the isaac10UI</span>
<span class="nx">Isaac10UI</span><span class="p">.</span><span class="nx">setup</span><span class="p">({</span>
  <span class="s2">"isaac10Instance"</span><span class="p">:</span> <span class="nx">isaac10</span><span class="p">,</span>
  <span class="s2">"fetchTemplate"</span><span class="p">:</span> <span class="s2">"bootstrap3"</span><span class="p">,</span>
  <span class="s2">"locale"</span><span class="p">:</span> <span class="s2">"de"</span><span class="p">,</span>
  <span class="s2">"overrideTranslations"</span><span class="p">:</span> <span class="nx">customTranslations</span>   <span class="c1">// &lt;--------------------</span>
<span class="p">}).</span><span class="nx">render</span><span class="p">(</span><span class="s2">"#isaac10-ui"</span><span class="p">);</span>
</code></pre>

<p>By <a href="#embedding-and-initialization">initializing the <em>isaac10 UI</em></a> you can overwrite or add translations employing the parameter <code class="prettyprint">overrideTranslations</code>.
Therefore you need to generate a JavaScript object which has the same structure as the translation file (see JavaScript tab).</p>

<p>You can use the currently used translation file in not minified form (as coffee script) as template to be downloaded here: <br></p>

<p><a href="https://app.isaac10.com/ui/translations.coffee">https://app.isaac10.com/ui/translations.coffee</a></p>

          <h2 id="apply-custom-templates">Apply custom Templates</h2>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/x-handlebars"</span>
        <span class="na">data-template-name=</span><span class="s">"isaac10-ui/components/div-accountDataFields"</span><span class="nt">&gt;</span>
  <span class="c1">// Embed the handlebars template for the account data fields component here.</span>
  <span class="c1">//</span>
  <span class="c1">// The component used when fetching the Bootstrap 3 templates is shown below</span>
  <span class="c1">// as an example.</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
<pre class="highlight handlebars"><code><span class="c">{{! isaac10-ui/components/div-accountDataFields}}</span>

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"</span><span class="k">{{</span><span class="nv">if</span> <span class="nv">errors</span><span class="p">.</span><span class="nv">email</span> <span class="s1">'has-error'</span><span class="k">}}</span><span class="s">"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"emailField"</span><span class="nt">&gt;</span>
    <span class="k">{{</span><span class="nv">t</span> <span class="s1">'components.divAccountDataFields.emailLabel'</span><span class="k">}}</span>
  <span class="nt">&lt;/label&gt;</span>
  <span class="k">{{</span><span class="nv">input</span> <span class="nv">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nv">value</span><span class="o">=</span><span class="nv">email</span> <span class="nv">id</span><span class="o">=</span><span class="s2">"emailField"</span><span class="k">}}</span>
  <span class="k">{{#if</span> <span class="nv">errors</span><span class="p">.</span><span class="nv">email</span><span class="k">}}</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"error"</span><span class="nt">&gt;</span><span class="k">{{</span><span class="nv">errors</span><span class="p">.</span><span class="nv">email</span><span class="k">}}</span><span class="nt">&lt;/div&gt;</span>
  <span class="k">{{/if}}</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>You also can integrate the <em>isaac10 UI</em> forms as blank pages in case you prefer to use your own templates. Therefore you must initiate the <em>isaac10 UI</em> with <code class="prettyprint">fetchTemplate: false</code>. As a result none of the templates will be reloaded and forms will be rendered to the given HTML element which has to contain the handlebars elements. These elements need to have the format to be seen on the right side.</p>

<p>Some CSS classes are already implicated (like <code class="prettyprint">&#39;has-error</code>). All elements can easily be modified with own CSS classes e.g. for validation failure for the foundation CSS framework (see right side).</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">REST</a>
                <a href="#" data-language-name="javascript">JavaScript</a>
          </div>
      </div>
    </div>
  </body>
</html>
